# Yarn

文档记录的是yarn 1.0.1版本

## 安装

### Mac OSX

1. 可以通过`Homebrew`包管理器来安装`Yarn`，如果你没有使用`brew`安装过`Node.js`，那安装`yarn`的时候，顺便也会安装`Node.js`的。

安装命令：`brew install yarn`
升级命令：`brew upgrade yarn`
卸载命令：`brew uninstall yarn`
查看`yarn`的依赖：`brew deps yarn`

```
➜  ~ brew deps yarn
icu4c
node
```

可以看到包含了`node`和`icu4c`，这里的`node`就是`Node.js`。

> icu4c是用来解决任何国际化的问题，根据各地的风俗和语言习惯，实现对数字、货币、时间、日期、和消息的格式化、解析，对字符串进行大小写转换、整理、搜索和排序等功能。


2. 如果你使用`nvm`来安装的`Node.js`，那安装`yarn`的时候就不应该顺带着安装`Node.js`，以便使用的是`nvm`安装的`Node.js`

安装命令：`brew install yarn --ignore-dependencies`
升级命令：`brew upgrade yarn --ignore-dependencies`
卸载命令：`brew uninstall yarn`

如果安装的时候，不小心顺带安装了`Node.js`，使用`brew uninstall node`命令卸载`Node.js`，会报错，因为`yarn`是依赖`Node.js`的，所以根据出现提示，可以执行`brew uninstall --ignore-dependencies node`命令，忽略依赖来卸载`Node.js`。

## yarn参数使用

`-h, --help`: 查看帮助信息
`-y, --yes`: 使用默认的选项

## yarn命令的使用

`yarn init`：初始化
`yarn add packageName`：添加一个包
`yarn add packageName --dev`
`yarn add packageName --offline`：离线添加
`yarn upgrade packageName`：升级
`yarn remove packageName`：删除一个包
`yarn why packageName`：对安装的包进行分析
`yarn info packageName`：显示远程包的信息
`yarn cache ls`：查看缓存的列表
`yarn cache dir`：查看缓存的目录
`yarn run scripts`：执行run命令
`yarn global add ...`: 全局安装

执行`yarn add`命令后，会生成一个`yarn.lock`文件，在该文件的开头有这样一行注释：`THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.（这是一个自动生成文件，不要直接编辑该文件）`

## 设置淘宝镜像

通过`yarn config list`命令可以查看`yarn`和`npm`的配置信息：

```
info yarn config
{
  ...
  registry: 'https://registry.yarnpkg.com'
}

info npm config
{
  ...
  registry: 'https://registry.npm.taobao.org'
}
```

执行命令：`yarn config set registry https://registry.npm.taobao.org`即可设置淘宝镜像，但是当你发布一个包的时候，不能使用淘宝的镜像，会发布失败的，需要改回原来的镜像源。